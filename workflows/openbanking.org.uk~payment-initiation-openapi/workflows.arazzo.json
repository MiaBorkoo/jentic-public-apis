{
  "arazzo": "1.0.1",
  "info": {
    "title": "Jentic Generated Arazzo Specification",
    "version": "1.0.0",
    "description": "Automatically generated Arazzo specification from OpenAPI"
  },
  "sourceDescriptions": [
    {
      "name": "openapi_source",
      "url": "./apis/openapi/openbanking.org.uk/payment-initiation-openapi/4.0.0/openapi.json",
      "type": "openapi"
    }
  ],
  "workflows": [
    {
      "workflowId": "initiate-domestic-single-payment",
      "summary": "This workflow allows a Payment Service User (PSU) to initiate a single, immediate payment to a domestic beneficiary. It involves creating a payment consent, checking its status and funds availability, and then executing the payment.",
      "description": "This workflow allows a Payment Service User (PSU) to initiate a single, immediate payment to a domestic beneficiary. It involves creating a payment consent, checking its status and funds availability, and then executing the payment.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-domestic-payment-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "DomesticPaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-domestic-payment-consent",
          "description": "Creates a domestic payment consent resource, specifying payment details like amount, debtor, and creditor accounts. This step typically precedes PSU authorisation.",
          "operationId": "CreateDomesticPaymentConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-domestic-payment-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-domestic-payment-consent-status",
          "description": "Retrieves the status of the domestic payment consent, which indicates if the PSU has authorised the payment.",
          "operationId": "GetDomesticPaymentConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "check-domestic-funds-confirmation",
          "description": "Checks if sufficient funds are available in the debtor's account for the consented domestic payment.",
          "operationId": "GetDomesticPaymentConsentsConsentIdFundsConfirmation",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "funds_available": "$response.body#/funds_available"
          }
        },
        {
          "stepId": "create-domestic-payment",
          "description": "Initiates the actual domestic payment using the previously created and authorised consent.",
          "operationId": "CreateDomesticPayments",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-domestic-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "domestic_payment_id": "$response.body#/domestic_payment_id"
          }
        },
        {
          "stepId": "get-domestic-payment-details",
          "description": "Retrieves the detailed status of the initiated domestic payment.",
          "operationId": "GetDomesticPaymentsDomesticPaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "DomesticPaymentId",
              "in": "path",
              "value": "$inputs.DomesticPaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-domestic-payment-consent.outputs.consent_id",
        "consent_status": "$steps.get-domestic-payment-consent-status.outputs.consent_status",
        "funds_available": "$steps.check-domestic-funds-confirmation.outputs.funds_available",
        "domestic_payment_id": "$steps.create-domestic-payment.outputs.domestic_payment_id",
        "payment_details": "$steps.get-domestic-payment-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "initiate-domestic-scheduled-payment",
      "summary": "This workflow enables a PSU to set up a single domestic payment to be executed at a future, specified date. It follows the consent-then-payment model.",
      "description": "This workflow enables a PSU to set up a single domestic payment to be executed at a future, specified date. It follows the consent-then-payment model.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-domestic-scheduled-payment-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "DomesticScheduledPaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-domestic-scheduled-payment-consent",
          "description": "Creates a consent resource for a domestic payment scheduled for a future date.",
          "operationId": "CreateDomesticScheduledPaymentConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-domestic-scheduled-payment-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-domestic-scheduled-payment-consent-status",
          "description": "Retrieves the status of the domestic scheduled payment consent.",
          "operationId": "GetDomesticScheduledPaymentConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "create-domestic-scheduled-payment",
          "description": "Initiates the domestic scheduled payment using the authorised consent.",
          "operationId": "CreateDomesticScheduledPayments",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-domestic-scheduled-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "domestic_scheduled_payment_id": "$response.body#/domestic_scheduled_payment_id"
          }
        },
        {
          "stepId": "get-domestic-scheduled-payment-details",
          "description": "Retrieves the detailed status of the initiated domestic scheduled payment.",
          "operationId": "GetDomesticScheduledPaymentsDomesticScheduledPaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "DomesticScheduledPaymentId",
              "in": "path",
              "value": "$inputs.DomesticScheduledPaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-domestic-scheduled-payment-consent.outputs.consent_id",
        "consent_status": "$steps.get-domestic-scheduled-payment-consent-status.outputs.consent_status",
        "domestic_scheduled_payment_id": "$steps.create-domestic-scheduled-payment.outputs.domestic_scheduled_payment_id",
        "payment_details": "$steps.get-domestic-scheduled-payment-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "set-up-domestic-standing-order",
      "summary": "This workflow allows a PSU to establish a recurring domestic payment (standing order) with a defined frequency and amounts. It involves creating a consent and then setting up the standing order.",
      "description": "This workflow allows a PSU to establish a recurring domestic payment (standing order) with a defined frequency and amounts. It involves creating a consent and then setting up the standing order.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-domestic-standing-order-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "DomesticStandingOrderId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-domestic-standing-order-consent",
          "description": "Creates a consent resource for a domestic standing order, including details about the recurring payments.",
          "operationId": "CreateDomesticStandingOrderConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-domestic-standing-order-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-domestic-standing-order-consent-status",
          "description": "Retrieves the status of the domestic standing order consent.",
          "operationId": "GetDomesticStandingOrderConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "create-domestic-standing-order",
          "description": "Initiates the domestic standing order using the authorised consent.",
          "operationId": "CreateDomesticStandingOrders",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-domestic-standing-order-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "domestic_standing_order_id": "$response.body#/domestic_standing_order_id"
          }
        },
        {
          "stepId": "get-domestic-standing-order-details",
          "description": "Retrieves the detailed status of the initiated domestic standing order.",
          "operationId": "GetDomesticStandingOrdersDomesticStandingOrderIdPaymentDetails",
          "parameters": [
            {
              "name": "DomesticStandingOrderId",
              "in": "path",
              "value": "$inputs.DomesticStandingOrderId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-domestic-standing-order-consent.outputs.consent_id",
        "consent_status": "$steps.get-domestic-standing-order-consent-status.outputs.consent_status",
        "domestic_standing_order_id": "$steps.create-domestic-standing-order.outputs.domestic_standing_order_id",
        "payment_details": "$steps.get-domestic-standing-order-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "initiate-international-single-payment",
      "summary": "This workflow facilitates initiating a single, immediate payment to an international beneficiary, including currency exchange details and funds confirmation.",
      "description": "This workflow facilitates initiating a single, immediate payment to an international beneficiary, including currency exchange details and funds confirmation.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-international-payment-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "InternationalPaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-international-payment-consent",
          "description": "Creates an international payment consent resource, specifying payment details, currency of transfer, and exchange rate information.",
          "operationId": "CreateInternationalPaymentConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-international-payment-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-international-payment-consent-status",
          "description": "Retrieves the status of the international payment consent.",
          "operationId": "GetInternationalPaymentConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "check-international-funds-confirmation",
          "description": "Checks if sufficient funds are available for the consented international payment.",
          "operationId": "GetInternationalPaymentConsentsConsentIdFundsConfirmation",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "funds_available": "$response.body#/funds_available"
          }
        },
        {
          "stepId": "create-international-payment",
          "description": "Initiates the actual international payment using the authorised consent.",
          "operationId": "CreateInternationalPayments",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-international-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "international_payment_id": "$response.body#/international_payment_id"
          }
        },
        {
          "stepId": "get-international-payment-details",
          "description": "Retrieves the detailed status of the initiated international payment.",
          "operationId": "GetInternationalPaymentsInternationalPaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "InternationalPaymentId",
              "in": "path",
              "value": "$inputs.InternationalPaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-international-payment-consent.outputs.consent_id",
        "consent_status": "$steps.get-international-payment-consent-status.outputs.consent_status",
        "funds_available": "$steps.check-international-funds-confirmation.outputs.funds_available",
        "international_payment_id": "$steps.create-international-payment.outputs.international_payment_id",
        "payment_details": "$steps.get-international-payment-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "initiate-international-scheduled-payment",
      "summary": "This workflow allows a PSU to schedule a single international payment for a future date, including currency exchange details.",
      "description": "This workflow allows a PSU to schedule a single international payment for a future date, including currency exchange details.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-international-scheduled-payment-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "InternationalScheduledPaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-international-scheduled-payment-consent",
          "description": "Creates a consent resource for an international payment scheduled for a future date.",
          "operationId": "CreateInternationalScheduledPaymentConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-international-scheduled-payment-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-international-scheduled-payment-consent-status",
          "description": "Retrieves the status of the international scheduled payment consent.",
          "operationId": "GetInternationalScheduledPaymentConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "check-international-scheduled-funds-confirmation",
          "description": "Checks if sufficient funds are available for the consented international scheduled payment.",
          "operationId": "GetInternationalScheduledPaymentConsentsConsentIdFundsConfirmation",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "funds_available": "$response.body#/funds_available"
          }
        },
        {
          "stepId": "create-international-scheduled-payment",
          "description": "Initiates the international scheduled payment using the authorised consent.",
          "operationId": "CreateInternationalScheduledPayments",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-international-scheduled-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "international_scheduled_payment_id": "$response.body#/international_scheduled_payment_id"
          }
        },
        {
          "stepId": "get-international-scheduled-payment-details",
          "description": "Retrieves the detailed status of the initiated international scheduled payment.",
          "operationId": "GetInternationalScheduledPaymentsInternationalScheduledPaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "InternationalScheduledPaymentId",
              "in": "path",
              "value": "$inputs.InternationalScheduledPaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-international-scheduled-payment-consent.outputs.consent_id",
        "consent_status": "$steps.get-international-scheduled-payment-consent-status.outputs.consent_status",
        "funds_available": "$steps.check-international-scheduled-funds-confirmation.outputs.funds_available",
        "international_scheduled_payment_id": "$steps.create-international-scheduled-payment.outputs.international_scheduled_payment_id",
        "payment_details": "$steps.get-international-scheduled-payment-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "set-up-international-standing-order",
      "summary": "This workflow enables a PSU to establish a recurring international payment (standing order) with a defined frequency and amounts, including currency conversion.",
      "description": "This workflow enables a PSU to establish a recurring international payment (standing order) with a defined frequency and amounts, including currency conversion.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-international-standing-order-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "InternationalStandingOrderPaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-international-standing-order-consent",
          "description": "Creates a consent resource for an international standing order.",
          "operationId": "CreateInternationalStandingOrderConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-international-standing-order-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-international-standing-order-consent-status",
          "description": "Retrieves the status of the international standing order consent.",
          "operationId": "GetInternationalStandingOrderConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "create-international-standing-order",
          "description": "Initiates the international standing order using the authorised consent.",
          "operationId": "CreateInternationalStandingOrders",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-international-standing-order-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "international_standing_order_id": "$response.body#/international_standing_order_id"
          }
        },
        {
          "stepId": "get-international-standing-order-details",
          "description": "Retrieves the detailed status of the initiated international standing order.",
          "operationId": "GetInternationalStandingOrdersInternationalStandingOrderPaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "InternationalStandingOrderPaymentId",
              "in": "path",
              "value": "$inputs.InternationalStandingOrderPaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-international-standing-order-consent.outputs.consent_id",
        "consent_status": "$steps.get-international-standing-order-consent-status.outputs.consent_status",
        "international_standing_order_id": "$steps.create-international-standing-order.outputs.international_standing_order_id",
        "payment_details": "$steps.get-international-standing-order-details.outputs.payment_details"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "initiate-file-payment",
      "summary": "This workflow enables a PSU to initiate multiple payments by uploading a payment file. It covers consent, file upload, payment initiation, and status/report retrieval.",
      "description": "This workflow enables a PSU to initiate multiple payments by uploading a payment file. It covers consent, file upload, payment initiation, and status/report retrieval.",
      "inputs": {
        "type": "object",
        "properties": {
          "x-fapi-auth-date": {
            "type": "string"
          },
          "x-fapi-customer-ip-address": {
            "type": "string"
          },
          "x-fapi-interaction-id": {
            "type": "string"
          },
          "Authorization": {
            "type": "string"
          },
          "x-idempotency-key": {
            "type": "string"
          },
          "x-jws-signature": {
            "type": "string"
          },
          "x-customer-user-agent": {
            "type": "string"
          },
          "create-file-payment-consent_body": {
            "type": "object"
          },
          "ConsentId": {
            "type": "string"
          },
          "FilePaymentId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-file-payment-consent",
          "description": "Creates a consent resource for a file payment, specifying the file type and hash.",
          "operationId": "CreateFilePaymentConsents",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": "$inputs.create-file-payment-consent_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_id": "$response.body#/consent_id"
          }
        },
        {
          "stepId": "get-file-payment-consent-status",
          "description": "Retrieves the status of the file payment consent.",
          "operationId": "GetFilePaymentConsentsConsentId",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consent_status": "$response.body#/consent_status"
          }
        },
        {
          "stepId": "upload-payment-file",
          "description": "Uploads the actual payment file associated with the created consent.",
          "operationId": "CreateFilePaymentConsentsConsentIdFile",
          "parameters": [
            {
              "name": "ConsentId",
              "in": "path",
              "value": "$inputs.ConsentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-file-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "file_data": "$response.body"
          }
        },
        {
          "stepId": "create-file-payment",
          "description": "Initiates the file payment using the authorised consent and uploaded file.",
          "operationId": "CreateFilePayments",
          "parameters": [
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-idempotency-key",
              "in": "header",
              "value": "$inputs.x-idempotency-key"
            },
            {
              "name": "x-jws-signature",
              "in": "header",
              "value": "$inputs.x-jws-signature"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "requestBody": {
            "contentType": "application/json; charset=utf-8",
            "payload": {
              "consent_id": "$steps.create-file-payment-consent.outputs.consent_id"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "file_payment_id": "$response.body#/file_payment_id"
          }
        },
        {
          "stepId": "get-file-payment-details",
          "description": "Retrieves the detailed status of the initiated file payment.",
          "operationId": "GetFilePaymentsFilePaymentIdPaymentDetails",
          "parameters": [
            {
              "name": "FilePaymentId",
              "in": "path",
              "value": "$inputs.FilePaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "payment_details": "$response.body#/payment_details"
          }
        },
        {
          "stepId": "get-file-payment-report-file",
          "description": "Retrieves the report file for the initiated file payment, which may contain details about individual transactions.",
          "operationId": "GetFilePaymentsFilePaymentIdReportFile",
          "parameters": [
            {
              "name": "FilePaymentId",
              "in": "path",
              "value": "$inputs.FilePaymentId"
            },
            {
              "name": "x-fapi-auth-date",
              "in": "header",
              "value": "$inputs.x-fapi-auth-date"
            },
            {
              "name": "x-fapi-customer-ip-address",
              "in": "header",
              "value": "$inputs.x-fapi-customer-ip-address"
            },
            {
              "name": "x-fapi-interaction-id",
              "in": "header",
              "value": "$inputs.x-fapi-interaction-id"
            },
            {
              "name": "Authorization",
              "in": "header",
              "value": "$inputs.Authorization"
            },
            {
              "name": "x-customer-user-agent",
              "in": "header",
              "value": "$inputs.x-customer-user-agent"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "report_file_content": "$response.body#/report_file_content"
          }
        }
      ],
      "outputs": {
        "consent_id": "$steps.create-file-payment-consent.outputs.consent_id",
        "consent_status": "$steps.get-file-payment-consent-status.outputs.consent_status",
        "file_data": "$steps.upload-payment-file.outputs.file_data",
        "file_payment_id": "$steps.create-file-payment.outputs.file_payment_id",
        "payment_details": "$steps.get-file-payment-details.outputs.payment_details",
        "report_file_content": "$steps.get-file-payment-report-file.outputs.report_file_content"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    }
  ],
  "components": {
    "successActions": {
      "default_success": {
        "name": "default_success",
        "type": "end"
      }
    },
    "failureActions": {
      "auth_failure": {
        "name": "auth_failure",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 401"
          }
        ]
      },
      "permission_denied": {
        "name": "permission_denied",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 403"
          }
        ]
      },
      "not_found": {
        "name": "not_found",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 404"
          }
        ]
      },
      "server_error": {
        "name": "server_error",
        "type": "retry",
        "retryAfter": 2,
        "retryLimit": 3,
        "criteria": [
          {
            "condition": "$statusCode >= 500"
          }
        ]
      },
      "default_retry": {
        "name": "default_retry",
        "type": "retry",
        "retryAfter": 1,
        "retryLimit": 3
      },
      "default_failure": {
        "name": "default_failure",
        "type": "end"
      }
    }
  }
}