{
  "arazzo": "1.0.1",
  "info": {
    "title": "Jentic Generated Arazzo Specification",
    "version": "1.0.0",
    "description": "Automatically generated Arazzo specification from OpenAPI"
  },
  "sourceDescriptions": [
    {
      "name": "openapi_source",
      "url": "./apis/openapi/openbankingproject.ch/main/1.3.8_2020-12-14 - Swiss edition 1.3.8.1-CH/openapi.json",
      "type": "openapi"
    }
  ],
  "workflows": [
    {
      "workflowId": "initiate-and-authorize-a-single-payment",
      "summary": "This workflow allows a Third-Party Provider (TPP) to initiate a single payment request on behalf of a Payment Service User (PSU) and guide the PSU through the Strong Customer Authentication (SCA) process until the payment is authorized and its final status can be checked.",
      "description": "This workflow allows a Third-Party Provider (TPP) to initiate a single payment request on behalf of a Payment Service User (PSU) and guide the PSU through the Strong Customer Authentication (SCA) process until the payment is authorized and its final status can be checked.",
      "inputs": {
        "type": "object",
        "properties": {
          "payment-service": {
            "type": "string"
          },
          "payment-product": {
            "type": "string"
          },
          "X-Request-ID": {
            "type": "string"
          },
          "Digest": {
            "type": "string"
          },
          "Signature": {
            "type": "string"
          },
          "TPP-Signature-Certificate": {
            "type": "string"
          },
          "PSU-ID": {
            "type": "string"
          },
          "PSU-ID-Type": {
            "type": "string"
          },
          "PSU-Corporate-ID": {
            "type": "string"
          },
          "PSU-Corporate-ID-Type": {
            "type": "string"
          },
          "Consent-ID": {
            "type": "string"
          },
          "PSU-IP-Address": {
            "type": "string"
          },
          "TPP-Redirect-Preferred": {
            "type": "string"
          },
          "TPP-Redirect-URI": {
            "type": "string"
          },
          "TPP-Nok-Redirect-URI": {
            "type": "string"
          },
          "TPP-Explicit-Authorisation-Preferred": {
            "type": "string"
          },
          "TPP-Rejection-NoFunds-Preferred": {
            "type": "string"
          },
          "TPP-Brand-Logging-Information": {
            "type": "string"
          },
          "TPP-Notification-URI": {
            "type": "string"
          },
          "TPP-Notification-Content-Preferred": {
            "type": "string"
          },
          "PSU-IP-Port": {
            "type": "string"
          },
          "PSU-Accept": {
            "type": "string"
          },
          "PSU-Accept-Charset": {
            "type": "string"
          },
          "PSU-Accept-Encoding": {
            "type": "string"
          },
          "PSU-Accept-Language": {
            "type": "string"
          },
          "PSU-User-Agent": {
            "type": "string"
          },
          "PSU-Http-Method": {
            "type": "string"
          },
          "PSU-Device-ID": {
            "type": "string"
          },
          "PSU-Geo-Location": {
            "type": "string"
          },
          "paymentId": {
            "type": "string"
          },
          "authorisationId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "initiate-payment",
          "description": "Initiates a single payment request for a specified payment service and product. The response provides a payment ID and links for the next steps, including SCA if required.",
          "operationId": "initiatePayment",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Explicit-Authorisation-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Explicit-Authorisation-Preferred"
            },
            {
              "name": "TPP-Rejection-NoFunds-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Rejection-NoFunds-Preferred"
            },
            {
              "name": "TPP-Brand-Logging-Information",
              "in": "header",
              "value": "$inputs.TPP-Brand-Logging-Information"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "paymentId": "$response.body#/paymentId",
            "transactionStatus": "$response.body#/transactionStatus",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "start-payment-authorization",
          "description": "Starts the explicit authorization process for the initiated payment. This step is typically invoked if the 'initiate-payment' response includes a 'startAuthorisation' link, indicating that further PSU interaction is needed for SCA.",
          "operationId": "startPaymentAuthorisation",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$steps.initiate-payment.outputs.paymentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "paymentId": "$steps.initiate-payment.outputs.paymentId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "authorisationId": "$response.body#/authorisationId",
            "scaStatus": "$response.body#/scaStatus",
            "scaMethods": "$response.body#/scaMethods",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "update-payment-psu-data",
          "description": "Continues the SCA process by updating PSU data. This operation is flexible and can be used for PSU identification, authentication, selecting an SCA method, or providing transaction authorization data (e.g., an OTP), based on the links provided by the ASPSP.",
          "operationId": "updatePaymentPsuData",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$steps.initiate-payment.outputs.paymentId"
            },
            {
              "name": "authorisationId",
              "in": "path",
              "value": "$steps.start-payment-authorization.outputs.authorisationId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "paymentId": "$steps.initiate-payment.outputs.paymentId",
              "authorisationId": "$steps.start-payment-authorization.outputs.authorisationId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "scaStatus": "$response.body#/scaStatus",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "get-payment-status",
          "description": "Retrieves the current transaction status of the payment initiation, allowing the TPP to confirm if the payment has been successfully processed, is pending, or has failed.",
          "operationId": "getPaymentInitiationStatus",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$steps.initiate-payment.outputs.paymentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "transactionStatus": "$response.body#/transactionStatus",
            "fundsAvailable": "$response.body#/fundsAvailable"
          }
        }
      ],
      "outputs": {
        "paymentId": "$steps.initiate-payment.outputs.paymentId",
        "transactionStatus": "$steps.get-payment-status.outputs.transactionStatus",
        "_links": "$steps.update-payment-psu-data.outputs._links",
        "authorisationId": "$steps.start-payment-authorization.outputs.authorisationId",
        "scaStatus": "$steps.update-payment-psu-data.outputs.scaStatus",
        "scaMethods": "$steps.start-payment-authorization.outputs.scaMethods",
        "chosenScaMethod": "$steps.update-payment-psu-data.outputs.chosenScaMethod",
        "challengeData": "$steps.update-payment-psu-data.outputs.challengeData",
        "fundsAvailable": "$steps.get-payment-status.outputs.fundsAvailable"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "establish-account-information-consent",
      "summary": "This workflow enables a TPP to create a new consent for accessing a PSU's account information and to complete the necessary Strong Customer Authentication (SCA) process to validate this consent.",
      "description": "This workflow enables a TPP to create a new consent for accessing a PSU's account information and to complete the necessary Strong Customer Authentication (SCA) process to validate this consent.",
      "inputs": {
        "type": "object",
        "properties": {
          "X-Request-ID": {
            "type": "string"
          },
          "Digest": {
            "type": "string"
          },
          "Signature": {
            "type": "string"
          },
          "TPP-Signature-Certificate": {
            "type": "string"
          },
          "PSU-ID": {
            "type": "string"
          },
          "PSU-ID-Type": {
            "type": "string"
          },
          "PSU-Corporate-ID": {
            "type": "string"
          },
          "PSU-Corporate-ID-Type": {
            "type": "string"
          },
          "TPP-Redirect-Preferred": {
            "type": "string"
          },
          "TPP-Redirect-URI": {
            "type": "string"
          },
          "TPP-Nok-Redirect-URI": {
            "type": "string"
          },
          "TPP-Explicit-Authorisation-Preferred": {
            "type": "string"
          },
          "TPP-Brand-Logging-Information": {
            "type": "string"
          },
          "TPP-Notification-URI": {
            "type": "string"
          },
          "TPP-Notification-Content-Preferred": {
            "type": "string"
          },
          "PSU-IP-Port": {
            "type": "string"
          },
          "PSU-IP-Address": {
            "type": "string"
          },
          "PSU-Accept": {
            "type": "string"
          },
          "PSU-Accept-Charset": {
            "type": "string"
          },
          "PSU-Accept-Encoding": {
            "type": "string"
          },
          "PSU-Accept-Language": {
            "type": "string"
          },
          "PSU-User-Agent": {
            "type": "string"
          },
          "PSU-Http-Method": {
            "type": "string"
          },
          "PSU-Device-ID": {
            "type": "string"
          },
          "PSU-Geo-Location": {
            "type": "string"
          },
          "consentId": {
            "type": "string"
          },
          "authorisationId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-account-consent",
          "description": "Creates a consent resource, defining the TPP's access rights to specific accounts of a PSU. The response includes the consent ID and links for the subsequent SCA process.",
          "operationId": "createConsent",
          "parameters": [
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Explicit-Authorisation-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Explicit-Authorisation-Preferred"
            },
            {
              "name": "TPP-Brand-Logging-Information",
              "in": "header",
              "value": "$inputs.TPP-Brand-Logging-Information"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consentId": "$response.body#/consentId",
            "consentStatus": "$response.body#/consentStatus",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "start-consent-authorization",
          "description": "Initiates the explicit authorization process for the created consent. This step is used when the 'create-account-consent' response indicates that an explicit authorization start is required.",
          "operationId": "startConsentAuthorisation",
          "parameters": [
            {
              "name": "consentId",
              "in": "path",
              "value": "$steps.create-account-consent.outputs.consentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "consentId": "$steps.create-account-consent.outputs.consentId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "authorisationId": "$response.body#/authorisationId",
            "scaStatus": "$response.body#/scaStatus",
            "scaMethods": "$response.body#/scaMethods",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "update-consent-psu-data",
          "description": "Continues the SCA process for the consent by updating PSU data. This can involve providing credentials, selecting an authentication method, or authorizing the consent with an OTP, depending on the ASPSP's requirements.",
          "operationId": "updateConsentsPsuData",
          "parameters": [
            {
              "name": "consentId",
              "in": "path",
              "value": "$steps.create-account-consent.outputs.consentId"
            },
            {
              "name": "authorisationId",
              "in": "path",
              "value": "$steps.start-consent-authorization.outputs.authorisationId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "consentId": "$steps.create-account-consent.outputs.consentId",
              "authorisationId": "$steps.start-consent-authorization.outputs.authorisationId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "scaStatus": "$response.body#/scaStatus",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "get-consent-status",
          "description": "Retrieves the current status of the account information consent, indicating whether it is valid, rejected, expired, or still pending authorization.",
          "operationId": "getConsentStatus",
          "parameters": [
            {
              "name": "consentId",
              "in": "path",
              "value": "$steps.create-account-consent.outputs.consentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "consentStatus": "$response.body#/consentStatus"
          }
        }
      ],
      "outputs": {
        "consentId": "$steps.create-account-consent.outputs.consentId",
        "consentStatus": "$steps.get-consent-status.outputs.consentStatus",
        "_links": "$steps.update-consent-psu-data.outputs._links",
        "authorisationId": "$steps.start-consent-authorization.outputs.authorisationId",
        "scaStatus": "$steps.update-consent-psu-data.outputs.scaStatus",
        "scaMethods": "$steps.start-consent-authorization.outputs.scaMethods",
        "chosenScaMethod": "$steps.update-consent-psu-data.outputs.chosenScaMethod",
        "challengeData": "$steps.update-consent-psu-data.outputs.challengeData"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "retrieve-account-information",
      "summary": "This workflow allows a TPP to retrieve various types of account information (list of accounts, details, balances, and transactions) for a PSU, provided a valid consent has been established.",
      "description": "This workflow allows a TPP to retrieve various types of account information (list of accounts, details, balances, and transactions) for a PSU, provided a valid consent has been established.",
      "inputs": {
        "type": "object",
        "properties": {
          "withBalance": {
            "type": "string"
          },
          "X-Request-ID": {
            "type": "string"
          },
          "Digest": {
            "type": "string"
          },
          "Signature": {
            "type": "string"
          },
          "TPP-Signature-Certificate": {
            "type": "string"
          },
          "Consent-ID": {
            "type": "string"
          },
          "PSU-IP-Address": {
            "type": "string"
          },
          "PSU-IP-Port": {
            "type": "string"
          },
          "PSU-Accept": {
            "type": "string"
          },
          "PSU-Accept-Charset": {
            "type": "string"
          },
          "PSU-Accept-Encoding": {
            "type": "string"
          },
          "PSU-Accept-Language": {
            "type": "string"
          },
          "PSU-User-Agent": {
            "type": "string"
          },
          "PSU-Http-Method": {
            "type": "string"
          },
          "PSU-Device-ID": {
            "type": "string"
          },
          "PSU-Geo-Location": {
            "type": "string"
          },
          "account-id": {
            "type": "string"
          },
          "dateFrom": {
            "type": "string"
          },
          "dateTo": {
            "type": "string"
          },
          "entryReferenceFrom": {
            "type": "string"
          },
          "bookingStatus": {
            "type": "string"
          },
          "deltaList": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "get-account-list",
          "description": "Retrieves a list of all payment accounts to which the TPP has been granted access by the PSU via a consent.",
          "operationId": "getAccountList",
          "parameters": [
            {
              "name": "withBalance",
              "in": "query",
              "value": "$inputs.withBalance"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "accounts": "$response.body#/accounts"
          }
        },
        {
          "stepId": "get-account-details",
          "description": "Retrieves detailed information for a specific account, identified by its account ID, including optional balance information.",
          "operationId": "readAccountDetails",
          "parameters": [
            {
              "name": "account-id",
              "in": "path",
              "value": "$steps.get-account-list.outputs.accounts.resourceId"
            },
            {
              "name": "withBalance",
              "in": "query",
              "value": "$inputs.withBalance"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "account": "$response.body#/account"
          }
        },
        {
          "stepId": "get-account-balances",
          "description": "Retrieves the balance information for a specific account, identified by its account ID.",
          "operationId": "getBalances",
          "parameters": [
            {
              "name": "account-id",
              "in": "path",
              "value": "$steps.get-account-list.outputs.accounts.resourceId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "balances": "$response.body#/balances"
          }
        },
        {
          "stepId": "get-account-transactions",
          "description": "Retrieves a list of transactions for a specific account within a defined period, with options for booking status and balance inclusion.",
          "operationId": "getTransactionList",
          "parameters": [
            {
              "name": "account-id",
              "in": "path",
              "value": "$steps.get-account-list.outputs.accounts.resourceId"
            },
            {
              "name": "dateFrom",
              "in": "query",
              "value": "$inputs.dateFrom"
            },
            {
              "name": "dateTo",
              "in": "query",
              "value": "$inputs.dateTo"
            },
            {
              "name": "entryReferenceFrom",
              "in": "query",
              "value": "$inputs.entryReferenceFrom"
            },
            {
              "name": "bookingStatus",
              "in": "query",
              "value": "$inputs.bookingStatus"
            },
            {
              "name": "deltaList",
              "in": "query",
              "value": "$inputs.deltaList"
            },
            {
              "name": "withBalance",
              "in": "query",
              "value": "$inputs.withBalance"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "transactions": "$response.body#/transactions",
            "balances": "$response.body#/balances"
          }
        }
      ],
      "outputs": {
        "accounts": "$steps.get-account-list.outputs.accounts",
        "account": "$steps.get-account-details.outputs.account",
        "balances": "$steps.get-account-transactions.outputs.balances",
        "transactions": "$steps.get-account-transactions.outputs.transactions"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "authorize-multiple-items-via-signing-basket",
      "summary": "This workflow enables a TPP to group multiple payment initiations and/or account information consents into a single 'signing basket' and authorize them with one Strong Customer Authentication (SCA) operation, streamlining the authorization process for the PSU.",
      "description": "This workflow enables a TPP to group multiple payment initiations and/or account information consents into a single 'signing basket' and authorize them with one Strong Customer Authentication (SCA) operation, streamlining the authorization process for the PSU.",
      "inputs": {
        "type": "object",
        "properties": {
          "X-Request-ID": {
            "type": "string"
          },
          "Digest": {
            "type": "string"
          },
          "Signature": {
            "type": "string"
          },
          "TPP-Signature-Certificate": {
            "type": "string"
          },
          "PSU-ID": {
            "type": "string"
          },
          "PSU-ID-Type": {
            "type": "string"
          },
          "PSU-Corporate-ID": {
            "type": "string"
          },
          "PSU-Corporate-ID-Type": {
            "type": "string"
          },
          "Consent-ID": {
            "type": "string"
          },
          "PSU-IP-Address": {
            "type": "string"
          },
          "TPP-Redirect-Preferred": {
            "type": "string"
          },
          "TPP-Redirect-URI": {
            "type": "string"
          },
          "TPP-Nok-Redirect-URI": {
            "type": "string"
          },
          "TPP-Explicit-Authorisation-Preferred": {
            "type": "string"
          },
          "TPP-Notification-URI": {
            "type": "string"
          },
          "TPP-Notification-Content-Preferred": {
            "type": "string"
          },
          "PSU-IP-Port": {
            "type": "string"
          },
          "PSU-Accept": {
            "type": "string"
          },
          "PSU-Accept-Charset": {
            "type": "string"
          },
          "PSU-Accept-Encoding": {
            "type": "string"
          },
          "PSU-Accept-Language": {
            "type": "string"
          },
          "PSU-User-Agent": {
            "type": "string"
          },
          "PSU-Http-Method": {
            "type": "string"
          },
          "PSU-Device-ID": {
            "type": "string"
          },
          "PSU-Geo-Location": {
            "type": "string"
          },
          "basketId": {
            "type": "string"
          },
          "authorisationId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "create-signing-basket",
          "description": "Creates a signing basket resource, allowing the TPP to include multiple payment IDs and/or consent IDs that need to be authorized together.",
          "operationId": "createSigningBasket",
          "parameters": [
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "Consent-ID",
              "in": "header",
              "value": "$inputs.Consent-ID"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Explicit-Authorisation-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Explicit-Authorisation-Preferred"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "basketId": "$response.body#/basketId",
            "transactionStatus": "$response.body#/transactionStatus",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "start-basket-authorization",
          "description": "Starts the explicit authorization process for the signing basket. This step is invoked if the 'create-signing-basket' response indicates that an explicit authorization start is required.",
          "operationId": "startSigningBasketAuthorisation",
          "parameters": [
            {
              "name": "basketId",
              "in": "path",
              "value": "$inputs.basketId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "basketId_PATH": "$steps.create-signing-basket.outputs.basketId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "authorisationId": "$response.body#/authorisationId",
            "scaStatus": "$response.body#/scaStatus",
            "scaMethods": "$response.body#/scaMethods",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "update-basket-psu-data",
          "description": "Continues the SCA process for the signing basket by updating PSU data, such as providing authentication credentials, selecting an SCA method, or providing transaction authorization data.",
          "operationId": "updateSigningBasketPsuData",
          "parameters": [
            {
              "name": "basketId",
              "in": "path",
              "value": "$inputs.basketId"
            },
            {
              "name": "authorisationId",
              "in": "path",
              "value": "$steps.start-basket-authorization.outputs.authorisationId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "basketId_PATH": "$steps.create-signing-basket.outputs.basketId",
              "authorisationId": "$steps.start-basket-authorization.outputs.authorisationId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "scaStatus": "$response.body#/scaStatus",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "get-basket-status",
          "description": "Retrieves the current status of the signing basket, indicating whether the basket authorization is complete, pending, or has failed.",
          "operationId": "getSigningBasketStatus",
          "parameters": [
            {
              "name": "basketId",
              "in": "path",
              "value": "$inputs.basketId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "transactionStatus": "$response.body#/transactionStatus"
          }
        }
      ],
      "outputs": {
        "basketId": "$steps.create-signing-basket.outputs.basketId",
        "transactionStatus": "$steps.get-basket-status.outputs.transactionStatus",
        "_links": "$steps.update-basket-psu-data.outputs._links",
        "authorisationId": "$steps.start-basket-authorization.outputs.authorisationId",
        "scaStatus": "$steps.update-basket-psu-data.outputs.scaStatus",
        "scaMethods": "$steps.start-basket-authorization.outputs.scaMethods",
        "chosenScaMethod": "$steps.update-basket-psu-data.outputs.chosenScaMethod",
        "challengeData": "$steps.update-basket-psu-data.outputs.challengeData"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    },
    {
      "workflowId": "cancel-an-existing-payment",
      "summary": "This workflow enables a TPP to initiate the cancellation of a previously submitted payment and, if required by the ASPSP, complete the Strong Customer Authentication (SCA) process for this cancellation.",
      "description": "This workflow enables a TPP to initiate the cancellation of a previously submitted payment and, if required by the ASPSP, complete the Strong Customer Authentication (SCA) process for this cancellation.",
      "inputs": {
        "type": "object",
        "properties": {
          "payment-service": {
            "type": "string"
          },
          "payment-product": {
            "type": "string"
          },
          "paymentId": {
            "type": "string"
          },
          "X-Request-ID": {
            "type": "string"
          },
          "Digest": {
            "type": "string"
          },
          "Signature": {
            "type": "string"
          },
          "TPP-Signature-Certificate": {
            "type": "string"
          },
          "TPP-Redirect-Preferred": {
            "type": "string"
          },
          "TPP-Nok-Redirect-URI": {
            "type": "string"
          },
          "TPP-Redirect-URI": {
            "type": "string"
          },
          "TPP-Explicit-Authorisation-Preferred": {
            "type": "string"
          },
          "PSU-IP-Address": {
            "type": "string"
          },
          "PSU-IP-Port": {
            "type": "string"
          },
          "PSU-Accept": {
            "type": "string"
          },
          "PSU-Accept-Charset": {
            "type": "string"
          },
          "PSU-Accept-Encoding": {
            "type": "string"
          },
          "PSU-Accept-Language": {
            "type": "string"
          },
          "PSU-User-Agent": {
            "type": "string"
          },
          "PSU-Http-Method": {
            "type": "string"
          },
          "PSU-Device-ID": {
            "type": "string"
          },
          "PSU-Geo-Location": {
            "type": "string"
          },
          "PSU-ID": {
            "type": "string"
          },
          "PSU-ID-Type": {
            "type": "string"
          },
          "PSU-Corporate-ID": {
            "type": "string"
          },
          "PSU-Corporate-ID-Type": {
            "type": "string"
          },
          "TPP-Notification-URI": {
            "type": "string"
          },
          "TPP-Notification-Content-Preferred": {
            "type": "string"
          },
          "start-cancellation-authorization_body": {
            "type": "object"
          },
          "authorisationId": {
            "type": "string"
          }
        }
      },
      "steps": [
        {
          "stepId": "initiate-payment-cancellation",
          "description": "Initiates the cancellation of a specific payment. The response indicates if further authorization is needed for the cancellation.",
          "operationId": "cancelPayment",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$inputs.paymentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Explicit-Authorisation-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Explicit-Authorisation-Preferred"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "transactionStatus": "$response.body#/transactionStatus",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "start-cancellation-authorization",
          "description": "Starts the explicit authorization process for the payment cancellation. This step is used if the 'initiate-payment-cancellation' response indicates that authorization is required.",
          "operationId": "startPaymentInitiationCancellationAuthorisation",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$inputs.paymentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "TPP-Redirect-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Redirect-Preferred"
            },
            {
              "name": "TPP-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Redirect-URI"
            },
            {
              "name": "TPP-Nok-Redirect-URI",
              "in": "header",
              "value": "$inputs.TPP-Nok-Redirect-URI"
            },
            {
              "name": "TPP-Notification-URI",
              "in": "header",
              "value": "$inputs.TPP-Notification-URI"
            },
            {
              "name": "TPP-Notification-Content-Preferred",
              "in": "header",
              "value": "$inputs.TPP-Notification-Content-Preferred"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": "$inputs.start-cancellation-authorization_body"
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "authorisationId": "$response.body#/authorisationId",
            "scaStatus": "$response.body#/scaStatus",
            "scaMethods": "$response.body#/scaMethods",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "update-cancellation-psu-data",
          "description": "Continues the SCA process for payment cancellation by updating PSU data, such as providing authentication credentials or authorizing the cancellation.",
          "operationId": "updatePaymentCancellationPsuData",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$inputs.paymentId"
            },
            {
              "name": "authorisationId",
              "in": "path",
              "value": "$steps.start-cancellation-authorization.outputs.authorisationId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-ID",
              "in": "header",
              "value": "$inputs.PSU-ID"
            },
            {
              "name": "PSU-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-ID-Type"
            },
            {
              "name": "PSU-Corporate-ID",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID"
            },
            {
              "name": "PSU-Corporate-ID-Type",
              "in": "header",
              "value": "$inputs.PSU-Corporate-ID-Type"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "requestBody": {
            "contentType": "application/json",
            "payload": {
              "authorisationId": "$steps.start-cancellation-authorization.outputs.authorisationId"
            }
          },
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "scaStatus": "$response.body#/scaStatus",
            "chosenScaMethod": "$response.body#/chosenScaMethod",
            "challengeData": "$response.body#/challengeData",
            "_links": "$response.body#/_links"
          }
        },
        {
          "stepId": "get-payment-status-after-cancellation",
          "description": "Retrieves the updated status of the payment after the cancellation process, confirming whether the payment has been successfully cancelled.",
          "operationId": "getPaymentInitiationStatus",
          "parameters": [
            {
              "name": "payment-service",
              "in": "path",
              "value": "$inputs.payment-service"
            },
            {
              "name": "payment-product",
              "in": "path",
              "value": "$inputs.payment-product"
            },
            {
              "name": "paymentId",
              "in": "path",
              "value": "$inputs.paymentId"
            },
            {
              "name": "X-Request-ID",
              "in": "header",
              "value": "$inputs.X-Request-ID"
            },
            {
              "name": "Digest",
              "in": "header",
              "value": "$inputs.Digest"
            },
            {
              "name": "Signature",
              "in": "header",
              "value": "$inputs.Signature"
            },
            {
              "name": "TPP-Signature-Certificate",
              "in": "header",
              "value": "$inputs.TPP-Signature-Certificate"
            },
            {
              "name": "PSU-IP-Address",
              "in": "header",
              "value": "$inputs.PSU-IP-Address"
            },
            {
              "name": "PSU-IP-Port",
              "in": "header",
              "value": "$inputs.PSU-IP-Port"
            },
            {
              "name": "PSU-Accept",
              "in": "header",
              "value": "$inputs.PSU-Accept"
            },
            {
              "name": "PSU-Accept-Charset",
              "in": "header",
              "value": "$inputs.PSU-Accept-Charset"
            },
            {
              "name": "PSU-Accept-Encoding",
              "in": "header",
              "value": "$inputs.PSU-Accept-Encoding"
            },
            {
              "name": "PSU-Accept-Language",
              "in": "header",
              "value": "$inputs.PSU-Accept-Language"
            },
            {
              "name": "PSU-User-Agent",
              "in": "header",
              "value": "$inputs.PSU-User-Agent"
            },
            {
              "name": "PSU-Http-Method",
              "in": "header",
              "value": "$inputs.PSU-Http-Method"
            },
            {
              "name": "PSU-Device-ID",
              "in": "header",
              "value": "$inputs.PSU-Device-ID"
            },
            {
              "name": "PSU-Geo-Location",
              "in": "header",
              "value": "$inputs.PSU-Geo-Location"
            }
          ],
          "successCriteria": [
            {
              "condition": "$statusCode == 200"
            }
          ],
          "outputs": {
            "transactionStatus": "$response.body#/transactionStatus",
            "fundsAvailable": "$response.body#/fundsAvailable"
          }
        }
      ],
      "outputs": {
        "transactionStatus": "$steps.get-payment-status-after-cancellation.outputs.transactionStatus",
        "_links": "$steps.update-cancellation-psu-data.outputs._links",
        "authorisationId": "$steps.start-cancellation-authorization.outputs.authorisationId",
        "scaStatus": "$steps.update-cancellation-psu-data.outputs.scaStatus",
        "scaMethods": "$steps.start-cancellation-authorization.outputs.scaMethods",
        "chosenScaMethod": "$steps.update-cancellation-psu-data.outputs.chosenScaMethod",
        "challengeData": "$steps.update-cancellation-psu-data.outputs.challengeData",
        "fundsAvailable": "$steps.get-payment-status-after-cancellation.outputs.fundsAvailable"
      },
      "failureActions": [
        {
          "reference": "$components.failureActions.auth_failure"
        },
        {
          "reference": "$components.failureActions.permission_denied"
        },
        {
          "reference": "$components.failureActions.not_found"
        },
        {
          "reference": "$components.failureActions.server_error"
        }
      ]
    }
  ],
  "components": {
    "successActions": {
      "default_success": {
        "name": "default_success",
        "type": "end"
      }
    },
    "failureActions": {
      "auth_failure": {
        "name": "auth_failure",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 401"
          }
        ]
      },
      "permission_denied": {
        "name": "permission_denied",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 403"
          }
        ]
      },
      "not_found": {
        "name": "not_found",
        "type": "end",
        "criteria": [
          {
            "condition": "$statusCode == 404"
          }
        ]
      },
      "server_error": {
        "name": "server_error",
        "type": "retry",
        "retryAfter": 2,
        "retryLimit": 3,
        "criteria": [
          {
            "condition": "$statusCode >= 500"
          }
        ]
      },
      "default_retry": {
        "name": "default_retry",
        "type": "retry",
        "retryAfter": 1,
        "retryLimit": 3
      },
      "default_failure": {
        "name": "default_failure",
        "type": "end"
      }
    }
  }
}